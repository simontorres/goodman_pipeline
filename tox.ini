[tox]
envlist = 
    py{38, 39, 310, 311, 312}-test{,-cov}

isolated_build = true

[testenv]
setenv = 
    MPLBACKEND=agg
allowlist_externals = *

passenv = HOME,WINDIR,LC_ALL,LC_CTYPE,CC,CI

changedir = .tmp/{envname}

description = 
    run tests
    cov: also test coverage

deps =
    cov: pytest-cov

commands =
    pytest '{toxinidir}/goodman_pipeline' {posargs}
    cov: pytest --cov goodman_pipeline --cov-config='{toxinidir}/setup.cfg' {posargs}